(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["public"],{

/***/ "./app/javascript/mastodon/load_keyboard_extensions.js":
/*!*************************************************************!*\
  !*** ./app/javascript/mastodon/load_keyboard_extensions.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return loadKeyboardExtensions; });\n// On KaiOS, we may not be able to use a mouse cursor or navigate using Tab-based focus, so we install\n// special left/right focus navigation keyboard listeners, at least on public pages (i.e. so folks\n// can at least log in using KaiOS devices).\n\nfunction importArrowKeyNavigation() {\n  return __webpack_require__.e(/*! import() | arrow-key-navigation */ \"arrow-key-navigation\").then(__webpack_require__.bind(null, /*! arrow-key-navigation */ \"./node_modules/arrow-key-navigation/dist-web/index.js\"));\n}\nfunction loadKeyboardExtensions() {\n  if (/KAIOS/.test(navigator.userAgent)) {\n    return importArrowKeyNavigation().then(arrowKeyNav => {\n      arrowKeyNav.register();\n    });\n  }\n  return Promise.resolve();\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hcHAvamF2YXNjcmlwdC9tYXN0b2Rvbi9sb2FkX2tleWJvYXJkX2V4dGVuc2lvbnMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvamF2YXNjcmlwdC9tYXN0b2Rvbi9sb2FkX2tleWJvYXJkX2V4dGVuc2lvbnMuanM/NTVkNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBPbiBLYWlPUywgd2UgbWF5IG5vdCBiZSBhYmxlIHRvIHVzZSBhIG1vdXNlIGN1cnNvciBvciBuYXZpZ2F0ZSB1c2luZyBUYWItYmFzZWQgZm9jdXMsIHNvIHdlIGluc3RhbGxcbi8vIHNwZWNpYWwgbGVmdC9yaWdodCBmb2N1cyBuYXZpZ2F0aW9uIGtleWJvYXJkIGxpc3RlbmVycywgYXQgbGVhc3Qgb24gcHVibGljIHBhZ2VzIChpLmUuIHNvIGZvbGtzXG4vLyBjYW4gYXQgbGVhc3QgbG9nIGluIHVzaW5nIEthaU9TIGRldmljZXMpLlxuXG5mdW5jdGlvbiBpbXBvcnRBcnJvd0tleU5hdmlnYXRpb24oKSB7XG4gIHJldHVybiBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJhcnJvdy1rZXktbmF2aWdhdGlvblwiICovICdhcnJvdy1rZXktbmF2aWdhdGlvbicpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsb2FkS2V5Ym9hcmRFeHRlbnNpb25zKCkge1xuICBpZiAoL0tBSU9TLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG4gICAgcmV0dXJuIGltcG9ydEFycm93S2V5TmF2aWdhdGlvbigpLnRoZW4oYXJyb3dLZXlOYXYgPT4ge1xuICAgICAgYXJyb3dLZXlOYXYucmVnaXN0ZXIoKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./app/javascript/mastodon/load_keyboard_extensions.js\n");

/***/ }),

/***/ "./app/javascript/packs/public.jsx":
/*!*****************************************!*\
  !*** ./app/javascript/packs/public.jsx ***!
  \*****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_dom_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-dom/client */ \"./node_modules/react-dom/client.js\");\n/* harmony import */ var react_dom_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_dom_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _public_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./public-path */ \"./app/javascript/packs/public-path.js\");\n/* harmony import */ var _public_path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_public_path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var intl_messageformat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! intl-messageformat */ \"./node_modules/intl-messageformat/lib/index.js\");\n/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-intl */ \"./node_modules/react-intl/lib/index.js\");\n/* harmony import */ var _rails_ujs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @rails/ujs */ \"./node_modules/@rails/ujs/lib/assets/compiled/rails-ujs.js\");\n/* harmony import */ var _rails_ujs__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_rails_ujs__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _mastodon_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../mastodon/common */ \"./app/javascript/mastodon/common.js\");\n/* harmony import */ var _mastodon_components_relative_timestamp__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../mastodon/components/relative_timestamp */ \"./app/javascript/mastodon/components/relative_timestamp.tsx\");\n/* harmony import */ var _mastodon_features_emoji_emoji__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../mastodon/features/emoji/emoji */ \"./app/javascript/mastodon/features/emoji/emoji.js\");\n/* harmony import */ var _mastodon_load_keyboard_extensions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../mastodon/load_keyboard_extensions */ \"./app/javascript/mastodon/load_keyboard_extensions.js\");\n/* harmony import */ var _mastodon_locales__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../mastodon/locales */ \"./app/javascript/mastodon/locales/index.ts\");\n/* harmony import */ var _mastodon_polyfills__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../mastodon/polyfills */ \"./app/javascript/mastodon/polyfills/index.ts\");\n/* harmony import */ var _mastodon_ready__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../mastodon/ready */ \"./app/javascript/mastodon/ready.js\");\n/* harmony import */ var cocoon_js_vanilla__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! cocoon-js-vanilla */ \"./node_modules/cocoon-js-vanilla/index.js\");\n/* harmony import */ var cocoon_js_vanilla__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(cocoon_js_vanilla__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_15__);\nvar _jsxFileName = \"/home/sleepybear/workspace/mastodon-sleepybear/app/javascript/packs/public.jsx\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nObject(_mastodon_common__WEBPACK_IMPORTED_MODULE_7__[\"start\"])();\nvar messages = Object(react_intl__WEBPACK_IMPORTED_MODULE_3__[\"defineMessages\"])({\n  usernameTaken: {\n    id: \"username.taken\",\n    defaultMessage: \"That username is taken. Try another\"\n  },\n  passwordExceedsLength: {\n    id: \"password_confirmation.exceeds_maxlength\",\n    defaultMessage: \"Password confirmation exceeds the maximum password length\"\n  },\n  passwordDoesNotMatch: {\n    id: \"password_confirmation.mismatching\",\n    defaultMessage: \"Password confirmation does not match\"\n  }\n});\nwindow.addEventListener('message', e => {\n  var data = e.data || {};\n  if (!window.parent || data.type !== 'setHeight') {\n    return;\n  }\n  Object(_mastodon_ready__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(() => {\n    window.parent.postMessage({\n      type: 'setHeight',\n      id: data.id,\n      height: document.getElementsByTagName('html')[0].scrollHeight\n    }, '*');\n  });\n});\nfunction loaded() {\n  var {\n    messages: localeData\n  } = Object(_mastodon_locales__WEBPACK_IMPORTED_MODULE_11__[\"getLocale\"])();\n  var locale = document.documentElement.lang;\n  var dateTimeFormat = new Intl.DateTimeFormat(locale, {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric'\n  });\n  var dateFormat = new Intl.DateTimeFormat(locale, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    timeFormat: false\n  });\n  var timeFormat = new Intl.DateTimeFormat(locale, {\n    timeStyle: 'short',\n    hour12: false\n  });\n  var formatMessage = (_ref, values) => {\n    var {\n      id,\n      defaultMessage\n    } = _ref;\n    var messageFormat = new intl_messageformat__WEBPACK_IMPORTED_MODULE_2__[\"IntlMessageFormat\"](localeData[id] || defaultMessage, locale);\n    return messageFormat.format(values);\n  };\n  [].forEach.call(document.querySelectorAll('.emojify'), content => {\n    content.innerHTML = Object(_mastodon_features_emoji_emoji__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(content.innerHTML);\n  });\n  [].forEach.call(document.querySelectorAll('time.formatted'), content => {\n    var datetime = new Date(content.getAttribute('datetime'));\n    var formattedDate = dateTimeFormat.format(datetime);\n    content.title = formattedDate;\n    content.textContent = formattedDate;\n  });\n  var isToday = date => {\n    var today = new Date();\n    return date.getDate() === today.getDate() && date.getMonth() === today.getMonth() && date.getFullYear() === today.getFullYear();\n  };\n  var todayFormat = new intl_messageformat__WEBPACK_IMPORTED_MODULE_2__[\"IntlMessageFormat\"](localeData['relative_format.today'] || 'Today at {time}', locale);\n  [].forEach.call(document.querySelectorAll('time.relative-formatted'), content => {\n    var datetime = new Date(content.getAttribute('datetime'));\n    var formattedContent;\n    if (isToday(datetime)) {\n      var formattedTime = timeFormat.format(datetime);\n      formattedContent = todayFormat.format({\n        time: formattedTime\n      });\n    } else {\n      formattedContent = dateFormat.format(datetime);\n    }\n    content.title = formattedContent;\n    content.textContent = formattedContent;\n  });\n  [].forEach.call(document.querySelectorAll('time.time-ago'), content => {\n    var datetime = new Date(content.getAttribute('datetime'));\n    var now = new Date();\n    var timeGiven = content.getAttribute('datetime').includes('T');\n    content.title = timeGiven ? dateTimeFormat.format(datetime) : dateFormat.format(datetime);\n    content.textContent = Object(_mastodon_components_relative_timestamp__WEBPACK_IMPORTED_MODULE_8__[\"timeAgoString\"])({\n      formatMessage,\n      formatDate: (date, options) => new Intl.DateTimeFormat(locale, options).format(date)\n    }, datetime, now, now.getFullYear(), timeGiven);\n  });\n  var reactComponents = document.querySelectorAll('[data-component]');\n  if (reactComponents.length > 0) {\n    __webpack_require__.e(/*! import() | containers/media_container */ \"containers/media_container\").then(__webpack_require__.bind(null, /*! ../mastodon/containers/media_container */ \"./app/javascript/mastodon/containers/media_container.jsx\")).then(_ref2 => {\n      var {\n        default: MediaContainer\n      } = _ref2;\n      [].forEach.call(reactComponents, component => {\n        [].forEach.call(component.children, child => {\n          component.removeChild(child);\n        });\n      });\n      var content = document.createElement('div');\n      var root = Object(react_dom_client__WEBPACK_IMPORTED_MODULE_0__[\"createRoot\"])(content);\n      root.render( /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_15__[\"jsxDEV\"])(MediaContainer, {\n        locale: locale,\n        components: reactComponents\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }, this));\n      document.body.appendChild(content);\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n  Object(_rails_ujs__WEBPACK_IMPORTED_MODULE_4__[\"delegate\"])(document, '#user_account_attributes_username', 'input', Object(lodash__WEBPACK_IMPORTED_MODULE_6__[\"throttle\"])(_ref3 => {\n    var {\n      target\n    } = _ref3;\n    if (target.value && target.value.length > 0) {\n      axios__WEBPACK_IMPORTED_MODULE_5__[\"default\"].get('/api/v1/accounts/lookup', {\n        params: {\n          acct: target.value\n        }\n      }).then(() => {\n        target.setCustomValidity(formatMessage(messages.usernameTaken));\n      }).catch(() => {\n        target.setCustomValidity('');\n      });\n    } else {\n      target.setCustomValidity('');\n    }\n  }, 500, {\n    leading: false,\n    trailing: true\n  }));\n  Object(_rails_ujs__WEBPACK_IMPORTED_MODULE_4__[\"delegate\"])(document, '#user_password,#user_password_confirmation', 'input', () => {\n    var password = document.getElementById('user_password');\n    var confirmation = document.getElementById('user_password_confirmation');\n    if (!confirmation) return;\n    if (confirmation.value && confirmation.value.length > password.maxLength) {\n      confirmation.setCustomValidity(formatMessage(messages.passwordExceedsLength));\n    } else if (password.value && password.value !== confirmation.value) {\n      confirmation.setCustomValidity(formatMessage(messages.passwordDoesNotMatch));\n    } else {\n      confirmation.setCustomValidity('');\n    }\n  });\n  Object(_rails_ujs__WEBPACK_IMPORTED_MODULE_4__[\"delegate\"])(document, '.status__content__spoiler-link', 'click', function () {\n    var statusEl = this.parentNode.parentNode;\n    if (statusEl.dataset.spoiler === 'expanded') {\n      statusEl.dataset.spoiler = 'folded';\n      this.textContent = new intl_messageformat__WEBPACK_IMPORTED_MODULE_2__[\"IntlMessageFormat\"](localeData['status.show_more'] || 'Show more', locale).format();\n    } else {\n      statusEl.dataset.spoiler = 'expanded';\n      this.textContent = new intl_messageformat__WEBPACK_IMPORTED_MODULE_2__[\"IntlMessageFormat\"](localeData['status.show_less'] || 'Show less', locale).format();\n    }\n    return false;\n  });\n  [].forEach.call(document.querySelectorAll('.status__content__spoiler-link'), spoilerLink => {\n    var statusEl = spoilerLink.parentNode.parentNode;\n    var message = statusEl.dataset.spoiler === 'expanded' ? localeData['status.show_less'] || 'Show less' : localeData['status.show_more'] || 'Show more';\n    spoilerLink.textContent = new intl_messageformat__WEBPACK_IMPORTED_MODULE_2__[\"IntlMessageFormat\"](message, locale).format();\n  });\n}\nObject(_rails_ujs__WEBPACK_IMPORTED_MODULE_4__[\"delegate\"])(document, '#edit_profile input[type=file]', 'change', _ref4 => {\n  var {\n    target\n  } = _ref4;\n  var avatar = document.getElementById(target.id + '-preview');\n  var [file] = target.files || [];\n  var url = file ? URL.createObjectURL(file) : avatar.dataset.originalSrc;\n  avatar.src = url;\n});\nObject(_rails_ujs__WEBPACK_IMPORTED_MODULE_4__[\"delegate\"])(document, '.input-copy input', 'click', _ref5 => {\n  var {\n    target\n  } = _ref5;\n  target.focus();\n  target.select();\n  target.setSelectionRange(0, target.value.length);\n});\nObject(_rails_ujs__WEBPACK_IMPORTED_MODULE_4__[\"delegate\"])(document, '.input-copy button', 'click', _ref6 => {\n  var {\n    target\n  } = _ref6;\n  var input = target.parentNode.querySelector('.input-copy__wrapper input');\n  var oldReadOnly = input.readonly;\n  input.readonly = false;\n  input.focus();\n  input.select();\n  input.setSelectionRange(0, input.value.length);\n  try {\n    if (document.execCommand('copy')) {\n      input.blur();\n      target.parentNode.classList.add('copied');\n      setTimeout(() => {\n        target.parentNode.classList.remove('copied');\n      }, 700);\n    }\n  } catch (err) {\n    console.error(err);\n  }\n  input.readonly = oldReadOnly;\n});\nvar toggleSidebar = () => {\n  var sidebar = document.querySelector('.sidebar ul');\n  var toggleButton = document.querySelector('.sidebar__toggle__icon');\n  if (sidebar.classList.contains('visible')) {\n    document.body.style.overflow = null;\n    toggleButton.setAttribute('aria-expanded', 'false');\n  } else {\n    document.body.style.overflow = 'hidden';\n    toggleButton.setAttribute('aria-expanded', 'true');\n  }\n  toggleButton.classList.toggle('active');\n  sidebar.classList.toggle('visible');\n};\nObject(_rails_ujs__WEBPACK_IMPORTED_MODULE_4__[\"delegate\"])(document, '.sidebar__toggle__icon', 'click', () => {\n  toggleSidebar();\n});\nObject(_rails_ujs__WEBPACK_IMPORTED_MODULE_4__[\"delegate\"])(document, '.sidebar__toggle__icon', 'keydown', e => {\n  if (e.key === ' ' || e.key === 'Enter') {\n    e.preventDefault();\n    toggleSidebar();\n  }\n});\nObject(_rails_ujs__WEBPACK_IMPORTED_MODULE_4__[\"delegate\"])(document, '.custom-emoji', 'mouseover', _ref7 => {\n  var {\n    target\n  } = _ref7;\n  return target.src = target.getAttribute('data-original');\n});\nObject(_rails_ujs__WEBPACK_IMPORTED_MODULE_4__[\"delegate\"])(document, '.custom-emoji', 'mouseout', _ref8 => {\n  var {\n    target\n  } = _ref8;\n  return target.src = target.getAttribute('data-static');\n});\n\n// Empty the honeypot fields in JS in case something like an extension\n// automatically filled them.\nObject(_rails_ujs__WEBPACK_IMPORTED_MODULE_4__[\"delegate\"])(document, '#registration_new_user,#new_user', 'submit', () => {\n  ['user_website', 'user_confirm_password', 'registration_user_website', 'registration_user_confirm_password'].forEach(id => {\n    var field = document.getElementById(id);\n    if (field) {\n      field.value = '';\n    }\n  });\n});\nfunction main() {\n  Object(_mastodon_ready__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(loaded);\n}\nObject(_mastodon_polyfills__WEBPACK_IMPORTED_MODULE_12__[\"loadPolyfills\"])().then(_mastodon_locales__WEBPACK_IMPORTED_MODULE_11__[\"loadLocale\"]).then(main).then(_mastodon_load_keyboard_extensions__WEBPACK_IMPORTED_MODULE_10__[\"default\"]).catch(error => {\n  console.error(error);\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hcHAvamF2YXNjcmlwdC9wYWNrcy9wdWJsaWMuanN4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vYXBwL2phdmFzY3JpcHQvcGFja3MvcHVibGljLmpzeD85YzEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVJvb3QgfSAgZnJvbSAncmVhY3QtZG9tL2NsaWVudCc7XG5cbmltcG9ydCAnLi9wdWJsaWMtcGF0aCc7XG5cbmltcG9ydCB7IEludGxNZXNzYWdlRm9ybWF0IH0gIGZyb20gJ2ludGwtbWVzc2FnZWZvcm1hdCc7XG5pbXBvcnQgeyBkZWZpbmVNZXNzYWdlcyB9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbXBvcnQgeyBkZWxlZ2F0ZSB9ICBmcm9tICdAcmFpbHMvdWpzJztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgeyB0aHJvdHRsZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7IHN0YXJ0IH0gZnJvbSAnLi4vbWFzdG9kb24vY29tbW9uJztcbmltcG9ydCB7IHRpbWVBZ29TdHJpbmcgfSAgZnJvbSAnLi4vbWFzdG9kb24vY29tcG9uZW50cy9yZWxhdGl2ZV90aW1lc3RhbXAnO1xuaW1wb3J0IGVtb2ppZnkgIGZyb20gJy4uL21hc3RvZG9uL2ZlYXR1cmVzL2Vtb2ppL2Vtb2ppJztcbmltcG9ydCBsb2FkS2V5Ym9hcmRFeHRlbnNpb25zIGZyb20gJy4uL21hc3RvZG9uL2xvYWRfa2V5Ym9hcmRfZXh0ZW5zaW9ucyc7XG5pbXBvcnQgeyBsb2FkTG9jYWxlLCBnZXRMb2NhbGUgfSBmcm9tICcuLi9tYXN0b2Rvbi9sb2NhbGVzJztcbmltcG9ydCB7IGxvYWRQb2x5ZmlsbHMgfSBmcm9tICcuLi9tYXN0b2Rvbi9wb2x5ZmlsbHMnO1xuaW1wb3J0IHJlYWR5IGZyb20gJy4uL21hc3RvZG9uL3JlYWR5JztcblxuaW1wb3J0ICdjb2Nvb24tanMtdmFuaWxsYSc7XG5cbnN0YXJ0KCk7XG5cbmNvbnN0IG1lc3NhZ2VzID0gZGVmaW5lTWVzc2FnZXMoe1xuICB1c2VybmFtZVRha2VuOiB7IGlkOiAndXNlcm5hbWUudGFrZW4nLCBkZWZhdWx0TWVzc2FnZTogJ1RoYXQgdXNlcm5hbWUgaXMgdGFrZW4uIFRyeSBhbm90aGVyJyB9LFxuICBwYXNzd29yZEV4Y2VlZHNMZW5ndGg6IHsgaWQ6ICdwYXNzd29yZF9jb25maXJtYXRpb24uZXhjZWVkc19tYXhsZW5ndGgnLCBkZWZhdWx0TWVzc2FnZTogJ1Bhc3N3b3JkIGNvbmZpcm1hdGlvbiBleGNlZWRzIHRoZSBtYXhpbXVtIHBhc3N3b3JkIGxlbmd0aCcgfSxcbiAgcGFzc3dvcmREb2VzTm90TWF0Y2g6IHsgaWQ6ICdwYXNzd29yZF9jb25maXJtYXRpb24ubWlzbWF0Y2hpbmcnLCBkZWZhdWx0TWVzc2FnZTogJ1Bhc3N3b3JkIGNvbmZpcm1hdGlvbiBkb2VzIG5vdCBtYXRjaCcgfSxcbn0pO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGUgPT4ge1xuICBjb25zdCBkYXRhID0gZS5kYXRhIHx8IHt9O1xuXG4gIGlmICghd2luZG93LnBhcmVudCB8fCBkYXRhLnR5cGUgIT09ICdzZXRIZWlnaHQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmVhZHkoKCkgPT4ge1xuICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe1xuICAgICAgdHlwZTogJ3NldEhlaWdodCcsXG4gICAgICBpZDogZGF0YS5pZCxcbiAgICAgIGhlaWdodDogZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXS5zY3JvbGxIZWlnaHQsXG4gICAgfSwgJyonKTtcbiAgfSk7XG59KTtcblxuZnVuY3Rpb24gbG9hZGVkKCkge1xuICBjb25zdCB7IG1lc3NhZ2VzOiBsb2NhbGVEYXRhIH0gPSBnZXRMb2NhbGUoKTtcblxuICBjb25zdCBsb2NhbGUgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZztcblxuICBjb25zdCBkYXRlVGltZUZvcm1hdCA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZSwge1xuICAgIHllYXI6ICdudW1lcmljJyxcbiAgICBtb250aDogJ2xvbmcnLFxuICAgIGRheTogJ251bWVyaWMnLFxuICAgIGhvdXI6ICdudW1lcmljJyxcbiAgICBtaW51dGU6ICdudW1lcmljJyxcbiAgfSk7XG5cbiAgY29uc3QgZGF0ZUZvcm1hdCA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZSwge1xuICAgIHllYXI6ICdudW1lcmljJyxcbiAgICBtb250aDogJ3Nob3J0JyxcbiAgICBkYXk6ICdudW1lcmljJyxcbiAgICB0aW1lRm9ybWF0OiBmYWxzZSxcbiAgfSk7XG5cbiAgY29uc3QgdGltZUZvcm1hdCA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZSwge1xuICAgIHRpbWVTdHlsZTogJ3Nob3J0JyxcbiAgICBob3VyMTI6IGZhbHNlLFxuICB9KTtcblxuICBjb25zdCBmb3JtYXRNZXNzYWdlID0gKHsgaWQsIGRlZmF1bHRNZXNzYWdlIH0sIHZhbHVlcykgPT4ge1xuICAgIGNvbnN0IG1lc3NhZ2VGb3JtYXQgPSBuZXcgSW50bE1lc3NhZ2VGb3JtYXQobG9jYWxlRGF0YVtpZF0gfHwgZGVmYXVsdE1lc3NhZ2UsIGxvY2FsZSk7XG4gICAgcmV0dXJuIG1lc3NhZ2VGb3JtYXQuZm9ybWF0KHZhbHVlcyk7XG4gIH07XG5cbiAgW10uZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lbW9qaWZ5JyksIChjb250ZW50KSA9PiB7XG4gICAgY29udGVudC5pbm5lckhUTUwgPSBlbW9qaWZ5KGNvbnRlbnQuaW5uZXJIVE1MKTtcbiAgfSk7XG5cbiAgW10uZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RpbWUuZm9ybWF0dGVkJyksIChjb250ZW50KSA9PiB7XG4gICAgY29uc3QgZGF0ZXRpbWUgPSBuZXcgRGF0ZShjb250ZW50LmdldEF0dHJpYnV0ZSgnZGF0ZXRpbWUnKSk7XG4gICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IGRhdGVUaW1lRm9ybWF0LmZvcm1hdChkYXRldGltZSk7XG5cbiAgICBjb250ZW50LnRpdGxlID0gZm9ybWF0dGVkRGF0ZTtcbiAgICBjb250ZW50LnRleHRDb250ZW50ID0gZm9ybWF0dGVkRGF0ZTtcbiAgfSk7XG5cbiAgY29uc3QgaXNUb2RheSA9IGRhdGUgPT4ge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcblxuICAgIHJldHVybiBkYXRlLmdldERhdGUoKSA9PT0gdG9kYXkuZ2V0RGF0ZSgpICYmXG4gICAgICBkYXRlLmdldE1vbnRoKCkgPT09IHRvZGF5LmdldE1vbnRoKCkgJiZcbiAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcbiAgfTtcbiAgY29uc3QgdG9kYXlGb3JtYXQgPSBuZXcgSW50bE1lc3NhZ2VGb3JtYXQobG9jYWxlRGF0YVsncmVsYXRpdmVfZm9ybWF0LnRvZGF5J10gfHwgJ1RvZGF5IGF0IHt0aW1lfScsIGxvY2FsZSk7XG5cbiAgW10uZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RpbWUucmVsYXRpdmUtZm9ybWF0dGVkJyksIChjb250ZW50KSA9PiB7XG4gICAgY29uc3QgZGF0ZXRpbWUgPSBuZXcgRGF0ZShjb250ZW50LmdldEF0dHJpYnV0ZSgnZGF0ZXRpbWUnKSk7XG5cbiAgICBsZXQgZm9ybWF0dGVkQ29udGVudDtcblxuICAgIGlmIChpc1RvZGF5KGRhdGV0aW1lKSkge1xuICAgICAgY29uc3QgZm9ybWF0dGVkVGltZSA9IHRpbWVGb3JtYXQuZm9ybWF0KGRhdGV0aW1lKTtcblxuICAgICAgZm9ybWF0dGVkQ29udGVudCA9IHRvZGF5Rm9ybWF0LmZvcm1hdCh7IHRpbWU6IGZvcm1hdHRlZFRpbWUgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm1hdHRlZENvbnRlbnQgPSBkYXRlRm9ybWF0LmZvcm1hdChkYXRldGltZSk7XG4gICAgfVxuXG4gICAgY29udGVudC50aXRsZSA9IGZvcm1hdHRlZENvbnRlbnQ7XG4gICAgY29udGVudC50ZXh0Q29udGVudCA9IGZvcm1hdHRlZENvbnRlbnQ7XG4gIH0pO1xuXG4gIFtdLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0aW1lLnRpbWUtYWdvJyksIChjb250ZW50KSA9PiB7XG4gICAgY29uc3QgZGF0ZXRpbWUgPSBuZXcgRGF0ZShjb250ZW50LmdldEF0dHJpYnV0ZSgnZGF0ZXRpbWUnKSk7XG4gICAgY29uc3Qgbm93ICAgICAgPSBuZXcgRGF0ZSgpO1xuXG4gICAgY29uc3QgdGltZUdpdmVuID0gY29udGVudC5nZXRBdHRyaWJ1dGUoJ2RhdGV0aW1lJykuaW5jbHVkZXMoJ1QnKTtcbiAgICBjb250ZW50LnRpdGxlID0gdGltZUdpdmVuID8gZGF0ZVRpbWVGb3JtYXQuZm9ybWF0KGRhdGV0aW1lKSA6IGRhdGVGb3JtYXQuZm9ybWF0KGRhdGV0aW1lKTtcbiAgICBjb250ZW50LnRleHRDb250ZW50ID0gdGltZUFnb1N0cmluZyh7XG4gICAgICBmb3JtYXRNZXNzYWdlLFxuICAgICAgZm9ybWF0RGF0ZTogKGRhdGUsIG9wdGlvbnMpID0+IChuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2NhbGUsIG9wdGlvbnMpKS5mb3JtYXQoZGF0ZSksXG4gICAgfSwgZGF0ZXRpbWUsIG5vdywgbm93LmdldEZ1bGxZZWFyKCksIHRpbWVHaXZlbik7XG4gIH0pO1xuXG4gIGNvbnN0IHJlYWN0Q29tcG9uZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNvbXBvbmVudF0nKTtcblxuICBpZiAocmVhY3RDb21wb25lbnRzLmxlbmd0aCA+IDApIHtcbiAgICBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJjb250YWluZXJzL21lZGlhX2NvbnRhaW5lclwiICovICcuLi9tYXN0b2Rvbi9jb250YWluZXJzL21lZGlhX2NvbnRhaW5lcicpXG4gICAgICAudGhlbigoeyBkZWZhdWx0OiBNZWRpYUNvbnRhaW5lciB9KSA9PiB7XG4gICAgICAgIFtdLmZvckVhY2guY2FsbChyZWFjdENvbXBvbmVudHMsIChjb21wb25lbnQpID0+IHtcbiAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoY29tcG9uZW50LmNoaWxkcmVuLCAoY2hpbGQpID0+IHtcbiAgICAgICAgICAgIGNvbXBvbmVudC5yZW1vdmVDaGlsZChjaGlsZCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBjb25zdCByb290ID0gY3JlYXRlUm9vdChjb250ZW50KTtcbiAgICAgICAgcm9vdC5yZW5kZXIoPE1lZGlhQ29udGFpbmVyIGxvY2FsZT17bG9jYWxlfSBjb21wb25lbnRzPXtyZWFjdENvbXBvbmVudHN9IC8+KTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250ZW50KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZGVsZWdhdGUoZG9jdW1lbnQsICcjdXNlcl9hY2NvdW50X2F0dHJpYnV0ZXNfdXNlcm5hbWUnLCAnaW5wdXQnLCB0aHJvdHRsZSgoeyB0YXJnZXQgfSkgPT4ge1xuICAgIGlmICh0YXJnZXQudmFsdWUgJiYgdGFyZ2V0LnZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgIGF4aW9zLmdldCgnL2FwaS92MS9hY2NvdW50cy9sb29rdXAnLCB7IHBhcmFtczogeyBhY2N0OiB0YXJnZXQudmFsdWUgfSB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgdGFyZ2V0LnNldEN1c3RvbVZhbGlkaXR5KGZvcm1hdE1lc3NhZ2UobWVzc2FnZXMudXNlcm5hbWVUYWtlbikpO1xuICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICB0YXJnZXQuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XG4gICAgfVxuICB9LCA1MDAsIHsgbGVhZGluZzogZmFsc2UsIHRyYWlsaW5nOiB0cnVlIH0pKTtcblxuICBkZWxlZ2F0ZShkb2N1bWVudCwgJyN1c2VyX3Bhc3N3b3JkLCN1c2VyX3Bhc3N3b3JkX2NvbmZpcm1hdGlvbicsICdpbnB1dCcsICgpID0+IHtcbiAgICBjb25zdCBwYXNzd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyX3Bhc3N3b3JkJyk7XG4gICAgY29uc3QgY29uZmlybWF0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJfcGFzc3dvcmRfY29uZmlybWF0aW9uJyk7XG4gICAgaWYgKCFjb25maXJtYXRpb24pIHJldHVybjtcblxuICAgIGlmIChjb25maXJtYXRpb24udmFsdWUgJiYgY29uZmlybWF0aW9uLnZhbHVlLmxlbmd0aCA+IHBhc3N3b3JkLm1heExlbmd0aCkge1xuICAgICAgY29uZmlybWF0aW9uLnNldEN1c3RvbVZhbGlkaXR5KGZvcm1hdE1lc3NhZ2UobWVzc2FnZXMucGFzc3dvcmRFeGNlZWRzTGVuZ3RoKSk7XG4gICAgfSBlbHNlIGlmIChwYXNzd29yZC52YWx1ZSAmJiBwYXNzd29yZC52YWx1ZSAhPT0gY29uZmlybWF0aW9uLnZhbHVlKSB7XG4gICAgICBjb25maXJtYXRpb24uc2V0Q3VzdG9tVmFsaWRpdHkoZm9ybWF0TWVzc2FnZShtZXNzYWdlcy5wYXNzd29yZERvZXNOb3RNYXRjaCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25maXJtYXRpb24uc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVsZWdhdGUoZG9jdW1lbnQsICcuc3RhdHVzX19jb250ZW50X19zcG9pbGVyLWxpbmsnLCAnY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBzdGF0dXNFbCA9IHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuXG4gICAgaWYgKHN0YXR1c0VsLmRhdGFzZXQuc3BvaWxlciA9PT0gJ2V4cGFuZGVkJykge1xuICAgICAgc3RhdHVzRWwuZGF0YXNldC5zcG9pbGVyID0gJ2ZvbGRlZCc7XG4gICAgICB0aGlzLnRleHRDb250ZW50ID0gKG5ldyBJbnRsTWVzc2FnZUZvcm1hdChsb2NhbGVEYXRhWydzdGF0dXMuc2hvd19tb3JlJ10gfHwgJ1Nob3cgbW9yZScsIGxvY2FsZSkpLmZvcm1hdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0dXNFbC5kYXRhc2V0LnNwb2lsZXIgPSAnZXhwYW5kZWQnO1xuICAgICAgdGhpcy50ZXh0Q29udGVudCA9IChuZXcgSW50bE1lc3NhZ2VGb3JtYXQobG9jYWxlRGF0YVsnc3RhdHVzLnNob3dfbGVzcyddIHx8ICdTaG93IGxlc3MnLCBsb2NhbGUpKS5mb3JtYXQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xuXG4gIFtdLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3RhdHVzX19jb250ZW50X19zcG9pbGVyLWxpbmsnKSwgKHNwb2lsZXJMaW5rKSA9PiB7XG4gICAgY29uc3Qgc3RhdHVzRWwgPSBzcG9pbGVyTGluay5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgY29uc3QgbWVzc2FnZSA9IChzdGF0dXNFbC5kYXRhc2V0LnNwb2lsZXIgPT09ICdleHBhbmRlZCcpID8gKGxvY2FsZURhdGFbJ3N0YXR1cy5zaG93X2xlc3MnXSB8fCAnU2hvdyBsZXNzJykgOiAobG9jYWxlRGF0YVsnc3RhdHVzLnNob3dfbW9yZSddIHx8ICdTaG93IG1vcmUnKTtcbiAgICBzcG9pbGVyTGluay50ZXh0Q29udGVudCA9IChuZXcgSW50bE1lc3NhZ2VGb3JtYXQobWVzc2FnZSwgbG9jYWxlKSkuZm9ybWF0KCk7XG4gIH0pO1xufVxuXG5kZWxlZ2F0ZShkb2N1bWVudCwgJyNlZGl0X3Byb2ZpbGUgaW5wdXRbdHlwZT1maWxlXScsICdjaGFuZ2UnLCAoeyB0YXJnZXQgfSkgPT4ge1xuICBjb25zdCBhdmF0YXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXQuaWQgKyAnLXByZXZpZXcnKTtcbiAgY29uc3QgW2ZpbGVdID0gdGFyZ2V0LmZpbGVzIHx8IFtdO1xuICBjb25zdCB1cmwgPSBmaWxlID8gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKSA6IGF2YXRhci5kYXRhc2V0Lm9yaWdpbmFsU3JjO1xuXG4gIGF2YXRhci5zcmMgPSB1cmw7XG59KTtcblxuZGVsZWdhdGUoZG9jdW1lbnQsICcuaW5wdXQtY29weSBpbnB1dCcsICdjbGljaycsICh7IHRhcmdldCB9KSA9PiB7XG4gIHRhcmdldC5mb2N1cygpO1xuICB0YXJnZXQuc2VsZWN0KCk7XG4gIHRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZSgwLCB0YXJnZXQudmFsdWUubGVuZ3RoKTtcbn0pO1xuXG5kZWxlZ2F0ZShkb2N1bWVudCwgJy5pbnB1dC1jb3B5IGJ1dHRvbicsICdjbGljaycsICh7IHRhcmdldCB9KSA9PiB7XG4gIGNvbnN0IGlucHV0ID0gdGFyZ2V0LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmlucHV0LWNvcHlfX3dyYXBwZXIgaW5wdXQnKTtcblxuICBjb25zdCBvbGRSZWFkT25seSA9IGlucHV0LnJlYWRvbmx5O1xuXG4gIGlucHV0LnJlYWRvbmx5ID0gZmFsc2U7XG4gIGlucHV0LmZvY3VzKCk7XG4gIGlucHV0LnNlbGVjdCgpO1xuICBpbnB1dC5zZXRTZWxlY3Rpb25SYW5nZSgwLCBpbnB1dC52YWx1ZS5sZW5ndGgpO1xuXG4gIHRyeSB7XG4gICAgaWYgKGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5JykpIHtcbiAgICAgIGlucHV0LmJsdXIoKTtcbiAgICAgIHRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2NvcGllZCcpO1xuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnY29waWVkJyk7XG4gICAgICB9LCA3MDApO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9XG5cbiAgaW5wdXQucmVhZG9ubHkgPSBvbGRSZWFkT25seTtcbn0pO1xuXG5jb25zdCB0b2dnbGVTaWRlYmFyID0gKCkgPT4ge1xuICBjb25zdCBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGViYXIgdWwnKTtcbiAgY29uc3QgdG9nZ2xlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGViYXJfX3RvZ2dsZV9faWNvbicpO1xuXG4gIGlmIChzaWRlYmFyLmNsYXNzTGlzdC5jb250YWlucygndmlzaWJsZScpKSB7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IG51bGw7XG4gICAgdG9nZ2xlQnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICB9IGVsc2Uge1xuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICB0b2dnbGVCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgfVxuXG4gIHRvZ2dsZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgc2lkZWJhci5jbGFzc0xpc3QudG9nZ2xlKCd2aXNpYmxlJyk7XG59O1xuXG5kZWxlZ2F0ZShkb2N1bWVudCwgJy5zaWRlYmFyX190b2dnbGVfX2ljb24nLCAnY2xpY2snLCAoKSA9PiB7XG4gIHRvZ2dsZVNpZGViYXIoKTtcbn0pO1xuXG5kZWxlZ2F0ZShkb2N1bWVudCwgJy5zaWRlYmFyX190b2dnbGVfX2ljb24nLCAna2V5ZG93bicsIGUgPT4ge1xuICBpZiAoZS5rZXkgPT09ICcgJyB8fCBlLmtleSA9PT0gJ0VudGVyJykge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0b2dnbGVTaWRlYmFyKCk7XG4gIH1cbn0pO1xuXG5kZWxlZ2F0ZShkb2N1bWVudCwgJy5jdXN0b20tZW1vamknLCAnbW91c2VvdmVyJywgKHsgdGFyZ2V0IH0pID0+IHRhcmdldC5zcmMgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsJykpO1xuZGVsZWdhdGUoZG9jdW1lbnQsICcuY3VzdG9tLWVtb2ppJywgJ21vdXNlb3V0JywgKHsgdGFyZ2V0IH0pID0+IHRhcmdldC5zcmMgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXN0YXRpYycpKTtcblxuLy8gRW1wdHkgdGhlIGhvbmV5cG90IGZpZWxkcyBpbiBKUyBpbiBjYXNlIHNvbWV0aGluZyBsaWtlIGFuIGV4dGVuc2lvblxuLy8gYXV0b21hdGljYWxseSBmaWxsZWQgdGhlbS5cbmRlbGVnYXRlKGRvY3VtZW50LCAnI3JlZ2lzdHJhdGlvbl9uZXdfdXNlciwjbmV3X3VzZXInLCAnc3VibWl0JywgKCkgPT4ge1xuICBbJ3VzZXJfd2Vic2l0ZScsICd1c2VyX2NvbmZpcm1fcGFzc3dvcmQnLCAncmVnaXN0cmF0aW9uX3VzZXJfd2Vic2l0ZScsICdyZWdpc3RyYXRpb25fdXNlcl9jb25maXJtX3Bhc3N3b3JkJ10uZm9yRWFjaChpZCA9PiB7XG4gICAgY29uc3QgZmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgaWYgKGZpZWxkKSB7XG4gICAgICBmaWVsZC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgfSk7XG59KTtcblxuZnVuY3Rpb24gbWFpbigpIHtcbiAgcmVhZHkobG9hZGVkKTtcbn1cblxubG9hZFBvbHlmaWxscygpXG4gIC50aGVuKGxvYWRMb2NhbGUpXG4gIC50aGVuKG1haW4pXG4gIC50aGVuKGxvYWRLZXlib2FyZEV4dGVuc2lvbnMpXG4gIC5jYXRjaChlcnJvciA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gIH0pO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./app/javascript/packs/public.jsx\n");

/***/ }),

/***/ "./node_modules/cocoon-js-vanilla/index.js":
/*!*************************************************!*\
  !*** ./node_modules/cocoon-js-vanilla/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("document.addEventListener('DOMContentLoaded', function () {\n  var cocoonElementCounter = 0;\n  var createNewID = function createNewID() {\n    return new Date().getTime() + cocoonElementCounter++;\n  };\n  var newcontentBraced = function newcontentBraced(id) {\n    return '[' + id + ']$1';\n  };\n  var newcontentUnderscored = function newcontentUnderscored(id) {\n    return '_' + id + '_$1';\n  };\n  var getInsertionNodeElem = function getInsertionNodeElem(insertionNode, insertionTraversal, thisNode) {\n    if (!insertionNode) {\n      return thisNode.parentNode;\n    }\n    if (typeof insertionNode === 'function') {\n      if (insertionTraversal) {\n        console.warn('association-insertion-traversal is ignored, because association-insertion-node is given as a function.');\n      }\n      return insertionNode(thisNode);\n    }\n    if (typeof insertionNode === 'string') {\n      if (insertionTraversal) {\n        return thisNode[insertionTraversal](insertionNode);\n      } else {\n        return insertionNode === 'this' ? thisNode : document.querySelector(insertionNode);\n      }\n    }\n  };\n  var cocoonDetach = function cocoonDetach(node) {\n    return node.parentElement.removeChild(node);\n  };\n  var cocoonGetPreviousSibling = function cocoonGetPreviousSibling(elem, selector) {\n    var sibling = elem.previousElementSibling;\n    if (!selector) return sibling;\n    while (sibling) {\n      var match = sibling.matches(selector);\n      if (match) return sibling;\n      sibling = sibling.previousElementSibling;\n    }\n  };\n  var cocoonAddFields = function cocoonAddFields(e, target) {\n    e.preventDefault();\n    e.stopPropagation();\n    var thisNode = target;\n    var assoc = thisNode.getAttribute('data-association');\n    var assocs = thisNode.getAttribute('data-associations');\n    var content = thisNode.getAttribute('data-association-insertion-template');\n    var insertionMethod = thisNode.getAttribute('data-association-insertion-method') || thisNode.getAttribute('data-association-insertion-position') || 'before';\n    var insertionNode = thisNode.getAttribute('data-association-insertion-node');\n    var insertionTraversal = thisNode.getAttribute('data-association-insertion-traversal');\n    var count = parseInt(thisNode.getAttribute('data-count'), 10);\n    var regexpBraced = new RegExp('\\\\[new_' + assoc + '\\\\](.*?\\\\s)', 'g');\n    var regexpUnderscored = new RegExp('_new_' + assoc + '_(\\\\w*)', 'g');\n    var newId = createNewID();\n    var newContent = content.replace(regexpBraced, newcontentBraced(newId));\n    var newContents = [];\n    var originalEvent = e;\n    if (newContent === content) {\n      regexpBraced = new RegExp('\\\\[new_' + assocs + '\\\\](.*?\\\\s)', 'g');\n      regexpUnderscored = new RegExp('_new_' + assocs + '_(\\\\w*)', 'g');\n      newContent = content.replace(regexpBraced, newcontentBraced(newId));\n    }\n    newContent = newContent.replace(regexpUnderscored, newcontentUnderscored(newId));\n    newContents = [newContent];\n    count = isNaN(count) ? 1 : Math.max(count, 1);\n    count -= 1;\n    while (count) {\n      newId = createNewID();\n      newContent = content.replace(regexpBraced, newcontentBraced(newId));\n      newContent = newContent.replace(regexpUnderscored, newcontentUnderscored(newId));\n      newContents.push(newContent);\n      count -= 1;\n    }\n    var insertionNodeElem = getInsertionNodeElem(insertionNode, insertionTraversal, thisNode);\n    if (!insertionNodeElem || insertionNodeElem.length === 0) {\n      console.warn(\"Couldn't find the element to insert the template. Make sure your `data-association-insertion-*` on `link_to_add_association` is correct.\");\n    }\n    newContents.forEach(function (node, i) {\n      var contentNode = node;\n      var beforeInsert = new CustomEvent('cocoon:before-insert', {\n        bubbles: true,\n        cancelable: true,\n        detail: [contentNode, originalEvent]\n      });\n      insertionNodeElem.dispatchEvent(beforeInsert);\n      if (!beforeInsert.defaultPrevented) {\n        // allow any of the jquery dom manipulation methods (after, before, append, prepend, etc)\n        // to be called on the node.  allows the insertion node to be the parent of the inserted\n        // code and doesn't force it to be a sibling like after/before does. default: 'before'\n        var htmlMapping = {\n          before: 'beforebegin',\n          prepend: 'afterbegin',\n          append: 'beforeend',\n          after: 'afterend'\n        };\n        var htmlMethod = htmlMapping[insertionMethod];\n        var addedContent = insertionNodeElem.insertAdjacentHTML(htmlMethod, contentNode);\n        if (htmlMethod === htmlMapping.before) {\n          addedContent = insertionNodeElem.previousElementSibling;\n        } else if (htmlMethod === htmlMapping.prepend) {\n          addedContent = insertionNodeElem.firstElementChild;\n        } else if (htmlMethod === htmlMapping.append) {\n          addedContent = insertionNodeElem.lastElementChild;\n        } else if (htmlMethod === htmlMapping.after) {\n          addedContent = insertionNodeElem.nextElementSibling;\n        }\n        var afterInsert = new CustomEvent('cocoon:after-insert', {\n          bubbles: true,\n          detail: [contentNode, originalEvent, addedContent]\n        });\n        insertionNodeElem.dispatchEvent(afterInsert);\n      }\n    });\n  };\n  var cocoonRemoveFields = function cocoonRemoveFields(e, target) {\n    var thisNode = target;\n    var wrapperClass = thisNode.getAttribute('data-wrapper-class') || 'nested-fields';\n    var nodeToDelete = thisNode.closest('.' + wrapperClass);\n    var triggerNode = nodeToDelete.parentNode;\n    var originalEvent = e;\n    e.preventDefault();\n    e.stopPropagation();\n    var beforeRemove = new CustomEvent('cocoon:before-remove', {\n      bubbles: true,\n      cancelable: true,\n      detail: [nodeToDelete, originalEvent]\n    });\n    triggerNode.dispatchEvent(beforeRemove);\n    if (!beforeRemove.defaultPrevented) {\n      var timeout = triggerNode.getAttribute('data-remove-timeout') || 0;\n      setTimeout(function () {\n        if (thisNode.classList.contains('dynamic')) {\n          cocoonDetach(nodeToDelete);\n        } else {\n          var hiddenInput = cocoonGetPreviousSibling(thisNode, 'input[type=hidden]');\n          hiddenInput.value = '1';\n          nodeToDelete.style.display = 'none';\n        }\n        var afterRemove = new CustomEvent('cocoon:after-remove', {\n          bubbles: true,\n          detail: [nodeToDelete, originalEvent]\n        });\n        triggerNode.dispatchEvent(afterRemove);\n      }, timeout);\n    }\n  };\n  document.addEventListener('click', function (e) {\n    for (var target = e.target; target && target !== this; target = target.parentNode) {\n      if (target.matches('.add_fields')) {\n        cocoonAddFields(e, target);\n        return;\n      }\n      if (target.matches('.remove_fields')) {\n        cocoonRemoveFields(e, target);\n        return;\n      }\n    }\n  }, false);\n});\n\n// TODO - Test this\n// document.addEventListener(\"DOMContentLoaded page:load turbolinks:load\", function () {\n//   var destroyedFields = document.querySelectorAll(\".remove_fields.existing.destroyed\");\n//   Array.prototype.forEach.call(destroyedFields, function (el) {\n//     var wrapperClass = el.getAttribute(\"data-wrapper-class\") || \"nested-fields\";\n//     el.closest(\".\" + wrapperClass).style.display = \"none\";\n//   });\n// });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY29jb29uLWpzLXZhbmlsbGEvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29jb29uLWpzLXZhbmlsbGEvaW5kZXguanM/ZGQyOSJdLCJzb3VyY2VzQ29udGVudCI6WyJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICB2YXIgY29jb29uRWxlbWVudENvdW50ZXIgPSAwO1xuICB2YXIgY3JlYXRlTmV3SUQgPSBmdW5jdGlvbiBjcmVhdGVOZXdJRCgpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBjb2Nvb25FbGVtZW50Q291bnRlcisrO1xuICB9O1xuICB2YXIgbmV3Y29udGVudEJyYWNlZCA9IGZ1bmN0aW9uIG5ld2NvbnRlbnRCcmFjZWQoaWQpIHtcbiAgICByZXR1cm4gJ1snICsgaWQgKyAnXSQxJztcbiAgfTtcbiAgdmFyIG5ld2NvbnRlbnRVbmRlcnNjb3JlZCA9IGZ1bmN0aW9uIG5ld2NvbnRlbnRVbmRlcnNjb3JlZChpZCkge1xuICAgIHJldHVybiAnXycgKyBpZCArICdfJDEnO1xuICB9O1xuICB2YXIgZ2V0SW5zZXJ0aW9uTm9kZUVsZW0gPSBmdW5jdGlvbiBnZXRJbnNlcnRpb25Ob2RlRWxlbShpbnNlcnRpb25Ob2RlLCBpbnNlcnRpb25UcmF2ZXJzYWwsIHRoaXNOb2RlKSB7XG4gICAgaWYgKCFpbnNlcnRpb25Ob2RlKSB7XG4gICAgICByZXR1cm4gdGhpc05vZGUucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBpbnNlcnRpb25Ob2RlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpZiAoaW5zZXJ0aW9uVHJhdmVyc2FsKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignYXNzb2NpYXRpb24taW5zZXJ0aW9uLXRyYXZlcnNhbCBpcyBpZ25vcmVkLCBiZWNhdXNlIGFzc29jaWF0aW9uLWluc2VydGlvbi1ub2RlIGlzIGdpdmVuIGFzIGEgZnVuY3Rpb24uJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaW5zZXJ0aW9uTm9kZSh0aGlzTm9kZSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgaW5zZXJ0aW9uTm9kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChpbnNlcnRpb25UcmF2ZXJzYWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNOb2RlW2luc2VydGlvblRyYXZlcnNhbF0oaW5zZXJ0aW9uTm9kZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gaW5zZXJ0aW9uTm9kZSA9PT0gJ3RoaXMnID8gdGhpc05vZGUgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGluc2VydGlvbk5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgdmFyIGNvY29vbkRldGFjaCA9IGZ1bmN0aW9uIGNvY29vbkRldGFjaChub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChub2RlKTtcbiAgfTtcbiAgdmFyIGNvY29vbkdldFByZXZpb3VzU2libGluZyA9IGZ1bmN0aW9uIGNvY29vbkdldFByZXZpb3VzU2libGluZyhlbGVtLCBzZWxlY3Rvcikge1xuICAgIHZhciBzaWJsaW5nID0gZWxlbS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgIGlmICghc2VsZWN0b3IpIHJldHVybiBzaWJsaW5nO1xuICAgIHdoaWxlIChzaWJsaW5nKSB7XG4gICAgICB2YXIgbWF0Y2ggPSBzaWJsaW5nLm1hdGNoZXMoc2VsZWN0b3IpO1xuICAgICAgaWYgKG1hdGNoKSByZXR1cm4gc2libGluZztcbiAgICAgIHNpYmxpbmcgPSBzaWJsaW5nLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgfVxuICB9O1xuICB2YXIgY29jb29uQWRkRmllbGRzID0gZnVuY3Rpb24gY29jb29uQWRkRmllbGRzKGUsIHRhcmdldCkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHZhciB0aGlzTm9kZSA9IHRhcmdldDtcbiAgICB2YXIgYXNzb2MgPSB0aGlzTm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXNzb2NpYXRpb24nKTtcbiAgICB2YXIgYXNzb2NzID0gdGhpc05vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLWFzc29jaWF0aW9ucycpO1xuICAgIHZhciBjb250ZW50ID0gdGhpc05vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLWFzc29jaWF0aW9uLWluc2VydGlvbi10ZW1wbGF0ZScpO1xuICAgIHZhciBpbnNlcnRpb25NZXRob2QgPSB0aGlzTm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXNzb2NpYXRpb24taW5zZXJ0aW9uLW1ldGhvZCcpIHx8IHRoaXNOb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1hc3NvY2lhdGlvbi1pbnNlcnRpb24tcG9zaXRpb24nKSB8fCAnYmVmb3JlJztcbiAgICB2YXIgaW5zZXJ0aW9uTm9kZSA9IHRoaXNOb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1hc3NvY2lhdGlvbi1pbnNlcnRpb24tbm9kZScpO1xuICAgIHZhciBpbnNlcnRpb25UcmF2ZXJzYWwgPSB0aGlzTm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXNzb2NpYXRpb24taW5zZXJ0aW9uLXRyYXZlcnNhbCcpO1xuICAgIHZhciBjb3VudCA9IHBhcnNlSW50KHRoaXNOb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1jb3VudCcpLCAxMCk7XG4gICAgdmFyIHJlZ2V4cEJyYWNlZCA9IG5ldyBSZWdFeHAoJ1xcXFxbbmV3XycgKyBhc3NvYyArICdcXFxcXSguKj9cXFxccyknLCAnZycpO1xuICAgIHZhciByZWdleHBVbmRlcnNjb3JlZCA9IG5ldyBSZWdFeHAoJ19uZXdfJyArIGFzc29jICsgJ18oXFxcXHcqKScsICdnJyk7XG4gICAgdmFyIG5ld0lkID0gY3JlYXRlTmV3SUQoKTtcbiAgICB2YXIgbmV3Q29udGVudCA9IGNvbnRlbnQucmVwbGFjZShyZWdleHBCcmFjZWQsIG5ld2NvbnRlbnRCcmFjZWQobmV3SWQpKTtcbiAgICB2YXIgbmV3Q29udGVudHMgPSBbXTtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IGU7XG4gICAgaWYgKG5ld0NvbnRlbnQgPT09IGNvbnRlbnQpIHtcbiAgICAgIHJlZ2V4cEJyYWNlZCA9IG5ldyBSZWdFeHAoJ1xcXFxbbmV3XycgKyBhc3NvY3MgKyAnXFxcXF0oLio/XFxcXHMpJywgJ2cnKTtcbiAgICAgIHJlZ2V4cFVuZGVyc2NvcmVkID0gbmV3IFJlZ0V4cCgnX25ld18nICsgYXNzb2NzICsgJ18oXFxcXHcqKScsICdnJyk7XG4gICAgICBuZXdDb250ZW50ID0gY29udGVudC5yZXBsYWNlKHJlZ2V4cEJyYWNlZCwgbmV3Y29udGVudEJyYWNlZChuZXdJZCkpO1xuICAgIH1cbiAgICBuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKHJlZ2V4cFVuZGVyc2NvcmVkLCBuZXdjb250ZW50VW5kZXJzY29yZWQobmV3SWQpKTtcbiAgICBuZXdDb250ZW50cyA9IFtuZXdDb250ZW50XTtcbiAgICBjb3VudCA9IGlzTmFOKGNvdW50KSA/IDEgOiBNYXRoLm1heChjb3VudCwgMSk7XG4gICAgY291bnQgLT0gMTtcbiAgICB3aGlsZSAoY291bnQpIHtcbiAgICAgIG5ld0lkID0gY3JlYXRlTmV3SUQoKTtcbiAgICAgIG5ld0NvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnZXhwQnJhY2VkLCBuZXdjb250ZW50QnJhY2VkKG5ld0lkKSk7XG4gICAgICBuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKHJlZ2V4cFVuZGVyc2NvcmVkLCBuZXdjb250ZW50VW5kZXJzY29yZWQobmV3SWQpKTtcbiAgICAgIG5ld0NvbnRlbnRzLnB1c2gobmV3Q29udGVudCk7XG4gICAgICBjb3VudCAtPSAxO1xuICAgIH1cbiAgICB2YXIgaW5zZXJ0aW9uTm9kZUVsZW0gPSBnZXRJbnNlcnRpb25Ob2RlRWxlbShpbnNlcnRpb25Ob2RlLCBpbnNlcnRpb25UcmF2ZXJzYWwsIHRoaXNOb2RlKTtcbiAgICBpZiAoIWluc2VydGlvbk5vZGVFbGVtIHx8IGluc2VydGlvbk5vZGVFbGVtLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS53YXJuKFwiQ291bGRuJ3QgZmluZCB0aGUgZWxlbWVudCB0byBpbnNlcnQgdGhlIHRlbXBsYXRlLiBNYWtlIHN1cmUgeW91ciBgZGF0YS1hc3NvY2lhdGlvbi1pbnNlcnRpb24tKmAgb24gYGxpbmtfdG9fYWRkX2Fzc29jaWF0aW9uYCBpcyBjb3JyZWN0LlwiKTtcbiAgICB9XG4gICAgbmV3Q29udGVudHMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSwgaSkge1xuICAgICAgdmFyIGNvbnRlbnROb2RlID0gbm9kZTtcbiAgICAgIHZhciBiZWZvcmVJbnNlcnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NvY29vbjpiZWZvcmUtaW5zZXJ0Jywge1xuICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgICBkZXRhaWw6IFtjb250ZW50Tm9kZSwgb3JpZ2luYWxFdmVudF1cbiAgICAgIH0pO1xuICAgICAgaW5zZXJ0aW9uTm9kZUVsZW0uZGlzcGF0Y2hFdmVudChiZWZvcmVJbnNlcnQpO1xuICAgICAgaWYgKCFiZWZvcmVJbnNlcnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAvLyBhbGxvdyBhbnkgb2YgdGhlIGpxdWVyeSBkb20gbWFuaXB1bGF0aW9uIG1ldGhvZHMgKGFmdGVyLCBiZWZvcmUsIGFwcGVuZCwgcHJlcGVuZCwgZXRjKVxuICAgICAgICAvLyB0byBiZSBjYWxsZWQgb24gdGhlIG5vZGUuICBhbGxvd3MgdGhlIGluc2VydGlvbiBub2RlIHRvIGJlIHRoZSBwYXJlbnQgb2YgdGhlIGluc2VydGVkXG4gICAgICAgIC8vIGNvZGUgYW5kIGRvZXNuJ3QgZm9yY2UgaXQgdG8gYmUgYSBzaWJsaW5nIGxpa2UgYWZ0ZXIvYmVmb3JlIGRvZXMuIGRlZmF1bHQ6ICdiZWZvcmUnXG4gICAgICAgIHZhciBodG1sTWFwcGluZyA9IHtcbiAgICAgICAgICBiZWZvcmU6ICdiZWZvcmViZWdpbicsXG4gICAgICAgICAgcHJlcGVuZDogJ2FmdGVyYmVnaW4nLFxuICAgICAgICAgIGFwcGVuZDogJ2JlZm9yZWVuZCcsXG4gICAgICAgICAgYWZ0ZXI6ICdhZnRlcmVuZCdcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGh0bWxNZXRob2QgPSBodG1sTWFwcGluZ1tpbnNlcnRpb25NZXRob2RdO1xuICAgICAgICB2YXIgYWRkZWRDb250ZW50ID0gaW5zZXJ0aW9uTm9kZUVsZW0uaW5zZXJ0QWRqYWNlbnRIVE1MKGh0bWxNZXRob2QsIGNvbnRlbnROb2RlKTtcbiAgICAgICAgaWYgKGh0bWxNZXRob2QgPT09IGh0bWxNYXBwaW5nLmJlZm9yZSkge1xuICAgICAgICAgIGFkZGVkQ29udGVudCA9IGluc2VydGlvbk5vZGVFbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgIH0gZWxzZSBpZiAoaHRtbE1ldGhvZCA9PT0gaHRtbE1hcHBpbmcucHJlcGVuZCkge1xuICAgICAgICAgIGFkZGVkQ29udGVudCA9IGluc2VydGlvbk5vZGVFbGVtLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICB9IGVsc2UgaWYgKGh0bWxNZXRob2QgPT09IGh0bWxNYXBwaW5nLmFwcGVuZCkge1xuICAgICAgICAgIGFkZGVkQ29udGVudCA9IGluc2VydGlvbk5vZGVFbGVtLmxhc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgIH0gZWxzZSBpZiAoaHRtbE1ldGhvZCA9PT0gaHRtbE1hcHBpbmcuYWZ0ZXIpIHtcbiAgICAgICAgICBhZGRlZENvbnRlbnQgPSBpbnNlcnRpb25Ob2RlRWxlbS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFmdGVySW5zZXJ0ID0gbmV3IEN1c3RvbUV2ZW50KCdjb2Nvb246YWZ0ZXItaW5zZXJ0Jywge1xuICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgZGV0YWlsOiBbY29udGVudE5vZGUsIG9yaWdpbmFsRXZlbnQsIGFkZGVkQ29udGVudF1cbiAgICAgICAgfSk7XG4gICAgICAgIGluc2VydGlvbk5vZGVFbGVtLmRpc3BhdGNoRXZlbnQoYWZ0ZXJJbnNlcnQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICB2YXIgY29jb29uUmVtb3ZlRmllbGRzID0gZnVuY3Rpb24gY29jb29uUmVtb3ZlRmllbGRzKGUsIHRhcmdldCkge1xuICAgIHZhciB0aGlzTm9kZSA9IHRhcmdldDtcbiAgICB2YXIgd3JhcHBlckNsYXNzID0gdGhpc05vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXdyYXBwZXItY2xhc3MnKSB8fCAnbmVzdGVkLWZpZWxkcyc7XG4gICAgdmFyIG5vZGVUb0RlbGV0ZSA9IHRoaXNOb2RlLmNsb3Nlc3QoJy4nICsgd3JhcHBlckNsYXNzKTtcbiAgICB2YXIgdHJpZ2dlck5vZGUgPSBub2RlVG9EZWxldGUucGFyZW50Tm9kZTtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IGU7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdmFyIGJlZm9yZVJlbW92ZSA9IG5ldyBDdXN0b21FdmVudCgnY29jb29uOmJlZm9yZS1yZW1vdmUnLCB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgIGRldGFpbDogW25vZGVUb0RlbGV0ZSwgb3JpZ2luYWxFdmVudF1cbiAgICB9KTtcbiAgICB0cmlnZ2VyTm9kZS5kaXNwYXRjaEV2ZW50KGJlZm9yZVJlbW92ZSk7XG4gICAgaWYgKCFiZWZvcmVSZW1vdmUuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgdmFyIHRpbWVvdXQgPSB0cmlnZ2VyTm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmVtb3ZlLXRpbWVvdXQnKSB8fCAwO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzTm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2R5bmFtaWMnKSkge1xuICAgICAgICAgIGNvY29vbkRldGFjaChub2RlVG9EZWxldGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBoaWRkZW5JbnB1dCA9IGNvY29vbkdldFByZXZpb3VzU2libGluZyh0aGlzTm9kZSwgJ2lucHV0W3R5cGU9aGlkZGVuXScpO1xuICAgICAgICAgIGhpZGRlbklucHV0LnZhbHVlID0gJzEnO1xuICAgICAgICAgIG5vZGVUb0RlbGV0ZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhZnRlclJlbW92ZSA9IG5ldyBDdXN0b21FdmVudCgnY29jb29uOmFmdGVyLXJlbW92ZScsIHtcbiAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgIGRldGFpbDogW25vZGVUb0RlbGV0ZSwgb3JpZ2luYWxFdmVudF1cbiAgICAgICAgfSk7XG4gICAgICAgIHRyaWdnZXJOb2RlLmRpc3BhdGNoRXZlbnQoYWZ0ZXJSZW1vdmUpO1xuICAgICAgfSwgdGltZW91dCk7XG4gICAgfVxuICB9O1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgZm9yICh2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7IHRhcmdldCAmJiB0YXJnZXQgIT09IHRoaXM7IHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlKSB7XG4gICAgICBpZiAodGFyZ2V0Lm1hdGNoZXMoJy5hZGRfZmllbGRzJykpIHtcbiAgICAgICAgY29jb29uQWRkRmllbGRzKGUsIHRhcmdldCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0YXJnZXQubWF0Y2hlcygnLnJlbW92ZV9maWVsZHMnKSkge1xuICAgICAgICBjb2Nvb25SZW1vdmVGaWVsZHMoZSwgdGFyZ2V0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfSwgZmFsc2UpO1xufSk7XG5cbi8vIFRPRE8gLSBUZXN0IHRoaXNcbi8vIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkIHBhZ2U6bG9hZCB0dXJib2xpbmtzOmxvYWRcIiwgZnVuY3Rpb24gKCkge1xuLy8gICB2YXIgZGVzdHJveWVkRmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5yZW1vdmVfZmllbGRzLmV4aXN0aW5nLmRlc3Ryb3llZFwiKTtcbi8vICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChkZXN0cm95ZWRGaWVsZHMsIGZ1bmN0aW9uIChlbCkge1xuLy8gICAgIHZhciB3cmFwcGVyQ2xhc3MgPSBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXdyYXBwZXItY2xhc3NcIikgfHwgXCJuZXN0ZWQtZmllbGRzXCI7XG4vLyAgICAgZWwuY2xvc2VzdChcIi5cIiArIHdyYXBwZXJDbGFzcykuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuLy8gICB9KTtcbi8vIH0pOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/cocoon-js-vanilla/index.js\n");

/***/ })

},[["./app/javascript/packs/public.jsx","common"]]]);