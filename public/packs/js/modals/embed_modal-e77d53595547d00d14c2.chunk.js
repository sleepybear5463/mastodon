(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["modals/embed_modal"],{

/***/ "./app/javascript/mastodon/features/ui/components/embed_modal.jsx":
/*!************************************************************************!*\
  !*** ./app/javascript/mastodon/features/ui/components/embed_modal.jsx ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-intl */ \"./node_modules/react-intl/lib/index.js\");\n/* harmony import */ var react_immutable_pure_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-immutable-pure-component */ \"./node_modules/react-immutable-pure-component/lib/react-immutable-pure-component.es.js\");\n/* harmony import */ var mastodon_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! mastodon/api */ \"./app/javascript/mastodon/api.ts\");\n/* harmony import */ var mastodon_components_icon_button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! mastodon/components/icon_button */ \"./app/javascript/mastodon/components/icon_button.tsx\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_5__);\nvar _jsxFileName = \"/home/sleepybear/workspace/mastodon-sleepybear/app/javascript/mastodon/features/ui/components/embed_modal.jsx\";\n\n\n\n\n\n\nvar messages = Object(react_intl__WEBPACK_IMPORTED_MODULE_1__[\"defineMessages\"])({\n  close: {\n    id: \"lightbox.close\",\n    defaultMessage: \"Close\"\n  }\n});\nclass EmbedModal extends react_immutable_pure_component__WEBPACK_IMPORTED_MODULE_2__[\"default\"] {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      loading: false,\n      oembed: null\n    };\n    this.setIframeRef = c => {\n      this.iframe = c;\n    };\n    this.handleTextareaClick = e => {\n      e.target.select();\n    };\n  }\n  componentDidMount() {\n    var {\n      id\n    } = this.props;\n    this.setState({\n      loading: true\n    });\n    Object(mastodon_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().get(\"/api/web/embeds/\" + id).then(res => {\n      this.setState({\n        loading: false,\n        oembed: res.data\n      });\n      var iframeDocument = this.iframe.contentWindow.document;\n      iframeDocument.open();\n      iframeDocument.write(res.data.html);\n      iframeDocument.close();\n      iframeDocument.body.style.margin = 0;\n      this.iframe.width = iframeDocument.body.scrollWidth;\n      this.iframe.height = iframeDocument.body.scrollHeight;\n    }).catch(error => {\n      this.props.onError(error);\n    });\n  }\n  render() {\n    var {\n      intl,\n      onClose\n    } = this.props;\n    var {\n      oembed\n    } = this.state;\n    return /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_5__[\"jsxDEV\"])(\"div\", {\n      className: \"modal-root__modal report-modal embed-modal\",\n      children: [/*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_5__[\"jsxDEV\"])(\"div\", {\n        className: \"report-modal__target\",\n        children: [/*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_5__[\"jsxDEV\"])(mastodon_components_icon_button__WEBPACK_IMPORTED_MODULE_4__[\"IconButton\"], {\n          className: \"media-modal__close\",\n          title: intl.formatMessage(messages.close),\n          icon: \"times\",\n          onClick: onClose,\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_5__[\"jsxDEV\"])(react_intl__WEBPACK_IMPORTED_MODULE_1__[\"FormattedMessage\"], {\n          id: \"status.embed\",\n          defaultMessage: \"Embed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_5__[\"jsxDEV\"])(\"div\", {\n        className: \"report-modal__container embed-modal__container\",\n        style: {\n          display: 'block'\n        },\n        children: [/*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_5__[\"jsxDEV\"])(\"p\", {\n          className: \"hint\",\n          children: /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_5__[\"jsxDEV\"])(react_intl__WEBPACK_IMPORTED_MODULE_1__[\"FormattedMessage\"], {\n            id: \"embed.instructions\",\n            defaultMessage: \"Embed this status on your website by copying the code below.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_5__[\"jsxDEV\"])(\"input\", {\n          type: \"text\",\n          className: \"embed-modal__html\",\n          readOnly: true,\n          value: oembed && oembed.html || '',\n          onClick: this.handleTextareaClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_5__[\"jsxDEV\"])(\"p\", {\n          className: \"hint\",\n          children: /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_5__[\"jsxDEV\"])(react_intl__WEBPACK_IMPORTED_MODULE_1__[\"FormattedMessage\"], {\n            id: \"embed.preview\",\n            defaultMessage: \"Here is what it will look like:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/Object(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_5__[\"jsxDEV\"])(\"iframe\", {\n          className: \"embed-modal__iframe\",\n          frameBorder: \"0\",\n          ref: this.setIframeRef,\n          sandbox: \"allow-scripts allow-same-origin\",\n          title: \"preview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this);\n  }\n}\nEmbedModal.propTypes = {\n  id: prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.string.isRequired,\n  onClose: prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.func.isRequired,\n  onError: prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.func.isRequired,\n  intl: prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.object.isRequired\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_intl__WEBPACK_IMPORTED_MODULE_1__[\"injectIntl\"])(EmbedModal));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hcHAvamF2YXNjcmlwdC9tYXN0b2Rvbi9mZWF0dXJlcy91aS9jb21wb25lbnRzL2VtYmVkX21vZGFsLmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2FwcC9qYXZhc2NyaXB0L21hc3RvZG9uL2ZlYXR1cmVzL3VpL2NvbXBvbmVudHMvZW1iZWRfbW9kYWwuanN4PzA0MDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcblxuaW1wb3J0IHsgZGVmaW5lTWVzc2FnZXMsIEZvcm1hdHRlZE1lc3NhZ2UsIGluamVjdEludGwgfSBmcm9tICdyZWFjdC1pbnRsJztcblxuaW1wb3J0IEltbXV0YWJsZVB1cmVDb21wb25lbnQgZnJvbSAncmVhY3QtaW1tdXRhYmxlLXB1cmUtY29tcG9uZW50JztcblxuaW1wb3J0IGFwaSBmcm9tICdtYXN0b2Rvbi9hcGknO1xuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gJ21hc3RvZG9uL2NvbXBvbmVudHMvaWNvbl9idXR0b24nO1xuXG5jb25zdCBtZXNzYWdlcyA9IGRlZmluZU1lc3NhZ2VzKHtcbiAgY2xvc2U6IHsgaWQ6ICdsaWdodGJveC5jbG9zZScsIGRlZmF1bHRNZXNzYWdlOiAnQ2xvc2UnIH0sXG59KTtcblxuY2xhc3MgRW1iZWRNb2RhbCBleHRlbmRzIEltbXV0YWJsZVB1cmVDb21wb25lbnQge1xuXG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgaWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBvbkNsb3NlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIG9uRXJyb3I6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgaW50bDogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICB9O1xuXG4gIHN0YXRlID0ge1xuICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgIG9lbWJlZDogbnVsbCxcbiAgfTtcblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wcztcblxuICAgIHRoaXMuc2V0U3RhdGUoeyBsb2FkaW5nOiB0cnVlIH0pO1xuXG4gICAgYXBpKCkuZ2V0KGAvYXBpL3dlYi9lbWJlZHMvJHtpZH1gKS50aGVuKHJlcyA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgbG9hZGluZzogZmFsc2UsIG9lbWJlZDogcmVzLmRhdGEgfSk7XG5cbiAgICAgIGNvbnN0IGlmcmFtZURvY3VtZW50ID0gdGhpcy5pZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDtcblxuICAgICAgaWZyYW1lRG9jdW1lbnQub3BlbigpO1xuICAgICAgaWZyYW1lRG9jdW1lbnQud3JpdGUocmVzLmRhdGEuaHRtbCk7XG4gICAgICBpZnJhbWVEb2N1bWVudC5jbG9zZSgpO1xuXG4gICAgICBpZnJhbWVEb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpbiA9IDA7XG4gICAgICB0aGlzLmlmcmFtZS53aWR0aCAgPSBpZnJhbWVEb2N1bWVudC5ib2R5LnNjcm9sbFdpZHRoO1xuICAgICAgdGhpcy5pZnJhbWUuaGVpZ2h0ID0gaWZyYW1lRG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQ7XG4gICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgdGhpcy5wcm9wcy5vbkVycm9yKGVycm9yKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldElmcmFtZVJlZiA9IGMgPT4gIHtcbiAgICB0aGlzLmlmcmFtZSA9IGM7XG4gIH07XG5cbiAgaGFuZGxlVGV4dGFyZWFDbGljayA9IChlKSA9PiB7XG4gICAgZS50YXJnZXQuc2VsZWN0KCk7XG4gIH07XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IGludGwsIG9uQ2xvc2UgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyBvZW1iZWQgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLXJvb3RfX21vZGFsIHJlcG9ydC1tb2RhbCBlbWJlZC1tb2RhbCc+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXBvcnQtbW9kYWxfX3RhcmdldCc+XG4gICAgICAgICAgPEljb25CdXR0b24gY2xhc3NOYW1lPSdtZWRpYS1tb2RhbF9fY2xvc2UnIHRpdGxlPXtpbnRsLmZvcm1hdE1lc3NhZ2UobWVzc2FnZXMuY2xvc2UpfSBpY29uPSd0aW1lcycgb25DbGljaz17b25DbG9zZX0gc2l6ZT17MTZ9IC8+XG4gICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9J3N0YXR1cy5lbWJlZCcgZGVmYXVsdE1lc3NhZ2U9J0VtYmVkJyAvPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVwb3J0LW1vZGFsX19jb250YWluZXIgZW1iZWQtbW9kYWxfX2NvbnRhaW5lcicgc3R5bGU9e3sgZGlzcGxheTogJ2Jsb2NrJyB9fT5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9J2hpbnQnPlxuICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9J2VtYmVkLmluc3RydWN0aW9ucycgZGVmYXVsdE1lc3NhZ2U9J0VtYmVkIHRoaXMgc3RhdHVzIG9uIHlvdXIgd2Vic2l0ZSBieSBjb3B5aW5nIHRoZSBjb2RlIGJlbG93LicgLz5cbiAgICAgICAgICA8L3A+XG5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIHR5cGU9J3RleHQnXG4gICAgICAgICAgICBjbGFzc05hbWU9J2VtYmVkLW1vZGFsX19odG1sJ1xuICAgICAgICAgICAgcmVhZE9ubHlcbiAgICAgICAgICAgIHZhbHVlPXtvZW1iZWQgJiYgb2VtYmVkLmh0bWwgfHwgJyd9XG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZVRleHRhcmVhQ2xpY2t9XG4gICAgICAgICAgLz5cblxuICAgICAgICAgIDxwIGNsYXNzTmFtZT0naGludCc+XG4gICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD0nZW1iZWQucHJldmlldycgZGVmYXVsdE1lc3NhZ2U9J0hlcmUgaXMgd2hhdCBpdCB3aWxsIGxvb2sgbGlrZTonIC8+XG4gICAgICAgICAgPC9wPlxuXG4gICAgICAgICAgPGlmcmFtZVxuICAgICAgICAgICAgY2xhc3NOYW1lPSdlbWJlZC1tb2RhbF9faWZyYW1lJ1xuICAgICAgICAgICAgZnJhbWVCb3JkZXI9JzAnXG4gICAgICAgICAgICByZWY9e3RoaXMuc2V0SWZyYW1lUmVmfVxuICAgICAgICAgICAgc2FuZGJveD0nYWxsb3ctc2NyaXB0cyBhbGxvdy1zYW1lLW9yaWdpbidcbiAgICAgICAgICAgIHRpdGxlPSdwcmV2aWV3J1xuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IGluamVjdEludGwoRW1iZWRNb2RhbCk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQVVBO0FBQ0E7QUFDQTtBQUFBO0FBeUJBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQTVCQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBRUE7QUFwRkE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBK0VBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./app/javascript/mastodon/features/ui/components/embed_modal.jsx\n");

/***/ })

}]);